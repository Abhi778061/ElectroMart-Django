{% extends 'base.html' %}
{% load static %}
{% block content %}

<div class="container my-5">
  <div class="row g-5 align-items-start">

    <!-- ================= LEFT : IMAGES ================= -->
    <div class="col-md-5 text-center">

      {% if product.image %}
        <img id="mainImage"
             src="{{ product.image.url }}"
             class="img-fluid rounded shadow mb-3"
             style="max-height: 360px; object-fit: contain;"
             alt="{{ product.name }}">
      {% else %}
        <img id="mainImage"
             src="{% static 'img/no-image.png' %}"
             class="img-fluid rounded shadow mb-3"
             style="max-height: 360px;"
             alt="No image">
      {% endif %}

      <!-- Thumbnails -->
      <div class="d-flex justify-content-center gap-3 mb-4">
        {% if product.image %}
          <img src="{{ product.image.url }}" class="thumb active" onclick="changeImage(this)">
          <img src="{{ product.image.url }}" class="thumb" onclick="changeImage(this)">
          <img src="{{ product.image.url }}" class="thumb" onclick="changeImage(this)">
          <img src="{{ product.image.url }}" class="thumb" onclick="changeImage(this)">
        {% else %}
          <img src="{% static 'img/no-image.png' %}" class="thumb active">
        {% endif %}
      </div>

      <!-- Overview (NORMAL FLOW ‚Äì NO SCROLL) -->
      <div class="text-muted small text-start">
        <h5 class="fw-bold text-dark mb-2">Overview</h5>
        <p class="mb-1">‚úî Original product with brand warranty</p>
        <p class="mb-1">‚úî Carefully packed & quality checked</p>
        <p class="mb-1">‚úî Trusted by thousands of customers</p>
      </div>

    </div>

    <!-- ================= RIGHT : DETAILS ================= -->
    <div class="col-md-7">

      <h3 class="fw-bold">{{ product.name }}</h3>

      <p class="text-muted mb-1">
        Brand: <strong>ElectroMart Originals</strong>
      </p>

      <p class="text-success fw-semibold mb-2">
        ‚≠ê 4.4 Ratings | 2,300 Reviews
      </p>

      <hr>

      <h4 class="fw-bold text-success">
        ‚Çπ{{ product.price }}
        <span class="text-muted fs-6 text-decoration-line-through ms-2">
          ‚Çπ{{ product.price|add:2000 }}
        </span>
        <span class="text-danger fs-6 ms-2">20% OFF</span>
      </h4>

      <p class="text-success fw-semibold">
        Special price ‚Äì limited time deal
      </p>

      <!-- DELIVERY LINE (ONLY ONE LINE ADDED) -->
      <p class="fw-semibold text-primary mb-3">
        üì¶ Order now & get delivery by <span class="text-success">Tomorrow</span>
      </p>

      <p class="mt-3 text-muted">
        {{ product.description|default:"Premium quality product designed for modern users." }}
      </p>

      <div class="mt-4 d-flex gap-3">
        <a href="{% url 'add_to_cart' product.id %}"
           class="btn btn-warning px-4 py-2 fw-semibold">
          üõí Add to Cart
        </a>

        <a href="{% url 'add_to_wishlist' product.id %}"
           class="btn btn-outline-danger px-4">
          ‚ù§Ô∏è Add to Wishlist
        </a>
      </div>

      <div class="mt-4">
        <p class="mb-1">‚úî 7 Days Replacement</p>
        <p class="mb-1">‚úî Cash on Delivery Available</p>
        <p class="mb-1">‚úî 1 Year Warranty</p>
      </div>

    </div>

  </div>
</div>

<style>
.thumb {
  width: 70px;
  height: 70px;
  object-fit: cover;
  border-radius: 6px;
  border: 2px solid #ddd;
  cursor: pointer;
  transition: 0.3s;
}

.thumb:hover {
  transform: scale(1.05);
}

.thumb.active {
  border: 2px solid #28a745;
}
</style>

<script>
function changeImage(element) {
  document.getElementById('mainImage').src = element.src;
  document.querySelectorAll('.thumb').forEach(img => img.classList.remove('active'));
  element.classList.add('active');
}
</script>

{% endblock %}